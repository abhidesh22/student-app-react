(this["webpackJsonpstudent-app-client"]=this["webpackJsonpstudent-app-client"]||[]).push([[0],{116:function(e,t,n){},117:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(22),s=n.n(c),i=(n(90),n(91),n(11)),o=n(64),d=n(12),j=n.p+"static/media/studentapp.30cd8648.jpg",u=n(2),l=function(){return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("h1",{children:"Hello, welcome to The Student Info app"}),Object(u.jsx)("img",{src:j,alt:"studentapp"}),Object(u.jsx)("p",{children:"Welcome to my Student info App!!! Hop on to the About page to view more information."})]})},b=function(){return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("h1",{children:"About this App"}),Object(u.jsxs)("p",{children:["This Site is a test Student App. ",Object(u.jsx)("br",{}),"Select the Student Info Page and select university to get information about students and generate reports. ",Object(u.jsx)("br",{}),"You can edit or delete students into the university as well ",Object(u.jsx)("br",{}),"Create new students for universities ",Object(u.jsx)("br",{})]})]})},h=n(41),O=n.n(h),p=n(52),x=n(23),f=n(121),m=n(53),g=n.n(m),v=n(38),S=n(83),y=n(45),C=n(32),k=n(81),w=n(62),N=n.n(w),L=n(56),I=(n(113),n(65)),T=n(18);var G=function(){var e=Object(a.useState)([{name:"",_id:"",course:{name:"",type:""},grade:0,rollno:0,url:"",degreeEnrolled:"",address:{city:"",zipcode:""}}]),t=Object(i.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(!1),s=Object(i.a)(c,2),o=s[0],d=s[1],j=Object(a.useState)(!1),l=Object(i.a)(j,2),b=l[0],h=l[1],m=Object(a.useState)(!1),w=Object(i.a)(m,2),G=w[0],A=w[1],D=Object(a.useState)({}),E=Object(i.a)(D,2),F=E[0],P=E[1],B=Object(a.useState)([{name:"",_id:""}]),U=Object(i.a)(B,2),R=U[0],_=U[1],J=Object(a.useState)(""),H=Object(i.a)(J,2),M=H[0],Y=H[1],V=Object(a.useState)(!0),q=Object(i.a)(V,2),z=q[0],K=q[1],W=Object(a.useRef)(!0);T.d.register.apply(T.d,Object(x.a)(T.q)),T.d.register(T.c,T.i,T.k,T.h,T.o,T.p,T.f);var Q=Object(a.useRef)(null);Object(a.useEffect)((function(){return W.current=!0,fetch("/api/uni").then((function(e){return e.json()})).then((function(e){_(e)}),(function(e){Y(e.response.data.message)})),function(){W.current=!1}}),[n]);var X=Object(u.jsxs)("div",{className:"flex align-items-center export-buttons",children:[Object(u.jsx)(f.a,{type:"button",onClick:function(){Q.current.exportCSV()},className:"mr-2","data-pr-tooltip":"CSV",children:Object(u.jsx)(I.a,{})}),Object(u.jsx)(f.a,{type:"button",onClick:function(e){var t=new L.default("l","mm",[210,297]),a={startY:50,head:[["Student ID","Name","Grade","Subject"]],body:n.map((function(e){return[e.rollno,e.name,e.grade,e.course.name]}))};t.autoTable(a),t.save("studentList.pdf")},className:"p-button-warning mr-2","data-pr-tooltip":"PDF",children:Object(u.jsx)(I.b,{})})]}),Z=function(){var e=Object(p.a)(O.a.mark((function e(t){var n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),e.prev=1,n={headers:{"Content-Type":"application/json"}},e.next=5,g.a.delete("/api/student/".concat(t.rollno),n);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),Y("Not able to delete Student at the moment");case 10:$(F);case 11:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}(),$=function(e){e?(d(!0),K(!0),fetch("/api/student/byuni/".concat(e._id)).then((function(e){return e.json()})).then((function(e){r(e),K(!1)}),(function(e){Y(e.response.data.message)})),fetch("/api/student/bysubject/".concat(e._id)).then((function(e){return e.json()})).then((function(e){console.log(e),A({labels:e.map((function(e){return e.course_name[0]})),datasets:[{label:"Average Grades",data:e.map((function(e){return e.averageGrade})),backgroundColor:["#2a71d0"]}]})}),(function(e){Y(e.response.data.message)}))):d(!1)};return Object(u.jsxs)(u.Fragment,{children:[M?Object(u.jsx)("h2",{color:"red",children:" Error fetching the records currently, please try again later "}):null,Object(u.jsx)("h2",{children:"Select University"}),Object(u.jsx)(v.a,{value:F,options:R,onChange:function(e){return P((t=e).value),void $(t.value);var t},optionLabel:"name",filter:!0,showClear:!0,filterBy:"name",placeholder:"Select a University",itemTemplate:function(e){return Object(u.jsx)("div",{className:"country-item",children:Object(u.jsx)("div",{children:e.name})})},valueTemplate:function(e,t){return e?Object(u.jsx)("div",{className:"uni-item uni-item-value",children:Object(u.jsx)("div",{children:e.name})}):Object(u.jsx)("span",{children:t.placeholder})}}),!o||z?z?Object(u.jsx)("div",{children:Object(u.jsx)("h1",{children:" Loading Data, Please wait.. "})}):Object(u.jsx)("div",{children:Object(u.jsx)("h1",{children:" Select University to Get Student List"})}):b?Object(u.jsxs)("div",{children:[Object(u.jsx)("h1",{children:" Average Grades by Courses "}),Object(u.jsx)(f.a,{variant:"primary",onClick:function(){return h(!1)},children:" Back to Table Mode "}),Object(u.jsx)(f.a,{variant:"primary",onClick:function(){return function(){var e=new L.default("l","mm",[210,297]),t=document.getElementById("newChart");N()(t).then((function(t){var a=t.toDataURL("image/png",1);e.text(130,15," Student Report for ".concat(F.name)),e.addImage(a,"PNG",20,30,0,130);var r={startY:450,head:[["Student ID","Name","Grade","Subject"]],body:n.map((function(e){return[e.rollno,e.name,e.grade,e.course.name]}))};e.autoTable(r),e.save("gt_log.pdf")}))}()},children:" Download Pdf Report "}),Object(u.jsx)("div",{children:Object(u.jsx)(k.a,{id:"newChart",data:G,options:{plugins:{title:{display:!0,text:"Average Grades per course for university ".concat(F.name)},legend:{display:!0,position:"bottom"}}}})})]}):Object(u.jsxs)("div",{className:"card",children:[Object(u.jsx)(C.a,{target:".export-buttons>button",position:"bottom"}),Object(u.jsxs)("div",{children:[Object(u.jsx)(f.a,{variant:"primary",onClick:function(){return h(!0)},children:" Switch to Graph Mode "}),Object(u.jsx)("div",{className:"card",children:Object(u.jsxs)(S.a,{ref:Q,value:n,responsiveLayout:"scroll",header:X,dataKey:"id",progressPending:z,pagination:!0,children:[Object(u.jsx)(y.a,{field:"rollno",header:"Student ID"}),Object(u.jsx)(y.a,{field:"name",header:"Name"}),Object(u.jsx)(y.a,{field:"grade",header:"Grade"}),Object(u.jsx)(y.a,{field:"course.name",header:"Subject"}),Object(u.jsx)(y.a,{header:"Delete?",body:function(e){return Object(u.jsx)(f.a,{variant:"primary",onClick:function(){return Z(e)},children:" Delete "})}})]})})]})]})]})},A=function(){return Object(u.jsx)("h1",{children:"404: Page Not Found"})},D=n(123),E=n(122),F=n(124),P=function(e){e.user;return Object(u.jsx)(D.a,{bg:"primary",expand:"lg",variant:"dark",children:Object(u.jsxs)(E.a,{children:[Object(u.jsx)(D.a.Brand,{href:"/",children:"Student App"}),Object(u.jsx)(D.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(u.jsx)(D.a.Collapse,{id:"basic-navbar-nav",children:Object(u.jsxs)(F.a,{className:"me-auto",children:[Object(u.jsx)(F.a.Link,{href:"/",children:"Home"}),Object(u.jsx)(F.a.Link,{href:"/about",children:"About"}),Object(u.jsx)(F.a.Link,{href:"/studentlist",children:"Student Info"}),Object(u.jsx)(F.a.Link,{href:"/universitiesList",children:"Universities"})]})})]})})},B=(n(116),n(3)),U=n(125),R=function(){var e=Object(a.useState)({name:"",grade:0}),t=Object(i.a)(e,2),n=t[0],c=t[1],s=Object(a.useState)(""),o=Object(i.a)(s,2),j=o[0],l=o[1],b=Object(a.useState)(""),h=Object(i.a)(b,2),x=h[0],m=h[1],v=Object(d.f)(),S=r.a.useRef(!0),y=Object(d.g)();Object(a.useEffect)((function(){if(S.current){fetch("/api/student/".concat(y.rollno)).then((function(e){return e.json()})).then((function(e){c({name:e[0].name,grade:e[0].grade})}),(function(e){m("Error in retrieving the student details")}));var e=localStorage.getItem("loggedUser");e&&l(JSON.parse(e).username)}return function(){S.current=!1}}),[n,y.rollno]);var C=function(){var e=Object(p.a)(O.a.mark((function e(t){var n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n={headers:{"Content-Type":"application/json"}},e.next=4,g.a.put("/api/student/".concat(y.rollno),{name:t.name,grade:t.grade},n);case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),m("Not able to edit Student at the moment");case 9:v("/studentlist");case 10:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}();return Object(u.jsx)(u.Fragment,{children:Object(u.jsx)("div",{children:Object(u.jsxs)(U.a,{onSubmit:function(e){e.preventDefault(),j&&C(n)},children:[Object(u.jsx)("h2",{children:"Edit Student "}),x?Object(u.jsxs)("h1",{children:[" ",x," "]}):null,Object(u.jsxs)(U.a.Group,{controlId:"formBasicText",children:[Object(u.jsx)(U.a.Label,{children:"Student Name"}),Object(u.jsx)(U.a.Control,{type:"text",placeholder:"Enter name",onChange:function(e){return c(Object(B.a)(Object(B.a)({},n),{},{name:e.target.value}))},value:n.name})]}),Object(u.jsx)(U.a.Label,{children:Object(u.jsx)("strong",{children:n.grade})}),Object(u.jsxs)(U.a.Group,{controlId:"formBasicText",children:[Object(u.jsx)(U.a.Label,{children:"Student grade"}),Object(u.jsx)(U.a.Control,{as:"text",placeholder:"Enter student grade",onChange:function(e){return c(Object(B.a)(Object(B.a)({},n),{},{grade:e.target.value}))},value:n.grade})]}),Object(u.jsx)(f.a,{variant:"primary",type:"submit",children:"Update Student"})]})})})};n(77),n(78),n(79);var _=function(){var e=Object(a.useState)(""),t=Object(i.a)(e,2),n=t[0],r=t[1];return Object(a.useEffect)((function(){var e=localStorage.getItem("loggedUser");e&&r(JSON.parse(e).username)}),[]),Object(u.jsx)("div",{className:"App",children:Object(u.jsxs)(o.a,{children:[Object(u.jsx)(P,{user:n}),Object(u.jsx)("div",{id:"page-body",children:Object(u.jsxs)(d.c,{children:[Object(u.jsx)(d.a,{path:"/",element:Object(u.jsx)(l,{}),exact:!0}),Object(u.jsx)(d.a,{path:"/about",element:Object(u.jsx)(b,{})}),Object(u.jsx)(d.a,{path:"/studentlist",element:Object(u.jsx)(G,{})}),Object(u.jsx)(d.a,{path:"/editstudent/:id",element:Object(u.jsx)(R,{})}),";",Object(u.jsx)(d.a,{path:"/home",element:Object(u.jsx)(l,{})}),Object(u.jsx)(d.a,{path:"*",element:Object(u.jsx)(A,{})})]})})]})})},J=function(e){e&&e instanceof Function&&n.e(5).then(n.bind(null,267)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),a(e),r(e),c(e),s(e)}))};s.a.render(Object(u.jsx)(r.a.StrictMode,{children:Object(u.jsx)(_,{})}),document.getElementById("root")),J()},90:function(e,t,n){},91:function(e,t,n){}},[[117,1,3]]]);
//# sourceMappingURL=main.ad05afe1.chunk.js.map